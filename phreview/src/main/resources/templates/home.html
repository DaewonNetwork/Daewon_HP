<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
    <body>
        검색 :
        <br>

        <a href="/category">지역 카테고리</a>
        <br>

        <button id="nearPh">가까운 약국</button><br />
        <p id="status"></p>
        <a id="map-link" target="_blank"></a>

        <script>
            function geoFindMe() {
                const status = document.querySelector("#status");
                const mapLink = document.querySelector("#map-link");

                mapLink.href = "";
                mapLink.textContent = "";

                function success(position) {
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;
                    window.location.href = `/map/nearResult?lat=${latitude}&long=${longitude}`;
                }

                function error() {
                    status.textContent = "현재 위치를 가져올 수 없음";
                }

                if (!navigator.geolocation) {
                    status.textContent = "브라우저가 위치 정보를 지원하지 않음";
                } else {
                    status.textContent = "위치 파악 중…";
                    navigator.geolocation.getCurrentPosition(success, error);
                }
            }

            document.querySelector("#nearPh").addEventListener("click", geoFindMe);

        </script>
    </body>
</html>